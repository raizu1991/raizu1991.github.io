<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Advanced Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>
  <style>
    :root {
      --dark-blue: #0d1b2a;
      --blue: #1d3557;
      --yellow: #fcbf49;
      --light-bg: #f8f9fa;
    }
    body, html { height: 100%; margin: 0; }
    .sidebar { background: var(--dark-blue); color: white; height: 100vh; transition: width .3s; }
    .sidebar.collapsed { width: 4.5rem !important; }
    .sidebar a { color: white; padding: 0.75rem 1rem; display: flex; align-items: center; }
    .sidebar i { margin-right: 0.75rem; }
    .sidebar .collapse-text { opacity: 1; transition: opacity .3s; }
    .sidebar.collapsed .collapse-text { opacity: 0; }
    .navbar { background: var(--blue); }
    .navbar-brand, .navbar-toggler { color: var(--yellow); }
    .card { border-left: 5px solid var(--yellow); }
    .content { background: var(--light-bg); padding: 1.5rem; overflow-y: auto; height: calc(100vh - 56px); }
    .footer { background: var(--blue); color: white; padding: .5rem; text-align: center; }
    
    /* Login page styles */
    #login-page {
      position: relative;
      overflow: hidden;
      background: var(--dark-blue);
    }
    /* particles container fills login page */
    #tsparticles-login-bg {
      position: absolute;
      inset: 0;
      z-index: 0;
    }
    /* keep login card above particles */
    #login-page > .card {
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>

<!-- Login Page -->
<div id="login-page" class="vh-100 d-flex align-items-center justify-content-center">
  <div id="tsparticles-login-bg"></div>
  <div class="card p-4 shadow" style="width: 320px;">
    <h3 class="card-title mb-3">Please Sign In</h3>
    <form id="login-form" novalidate>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" required/>
        <div class="invalid-feedback">Valid email required</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" class="form-control" required minLength="4"/>
        <div class="invalid-feedback">Password is required (min 4 chars)</div>
      </div>
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>
  </div>
</div>

<!-- Dashboard Page (hidden initially) -->
<div id="dashboard-page" class="d-none">
  <div class="d-flex">
    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar d-flex flex-column p-3" style="width: 220px;">
      <button id="toggle-sidebar" class="btn btn-sm btn-secondary mb-3"><i class="bi bi-list"></i></button>
      <a href="#"><i class="bi bi-speedometer2 text-warning"></i> <span class="collapse-text">Dashboard</span></a>
      <a href="#"><i class="bi bi-people-fill text-warning"></i> <span class="collapse-text">Users</span></a>
      <a href="#"><i class="bi bi-bar-chart-line text-warning"></i> <span class="collapse-text">Reports</span></a>
      <hr class="text-secondary"/>
      <a href="#"><i class="bi bi-gear-fill text-warning"></i> <span class="collapse-text">Settings</span></a>
    </nav>
    <div class="flex-fill d-flex flex-column">
      <!-- Navbar -->
      <nav class="navbar navbar-expand navbar-dark">
        <a class="navbar-brand" href="#"><i class="bi bi-layout-text-sidebar-reverse"></i> My Dashboard</a>
        <button class="btn btn-sm btn-outline-warning ms-auto" id="logout-btn">Logout</button>
      </nav>
      <!-- Content -->
      <div class="content">
        <div class="row">
          <!-- Charts -->
          <div class="col-lg-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-graph-up text-warning"></i> Sales Trend</h5>
                <canvas id="lineChart"></canvas>
              </div>
            </div>
          </div>
          <div class="col-lg-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-bar-chart-fill text-warning"></i> Monthly Revenue</h5>
                <canvas id="barChart"></canvas>
              </div>
            </div>
          </div>
          <!-- DataTable -->
          <div class="col-12">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title"><i class="bi bi-table text-warning"></i> User Records</h5>
                <table id="data-table" class="table table-striped" style="width:100%">
                  <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th></tr></thead>
                  <tbody>
                    <tr><td>John Doe</td><td>john@example.com</td><td>Admin</td><td>Active</td></tr>
                    <tr><td>Jane Roe</td><td>jane@example.com</td><td>User</td><td>Inactive</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer -->
      <div class="footer">&copy; 2025 Dashboard Inc.</div>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" class="toast align-items-center text-white bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">Logged in successfully.</div>
      <button type="button" class="btn-close btn-close-white ms-2 me-2" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.min.js"></script>


<script>
// Simple login form handler
const loginForm = document.getElementById('login-form');
const loginPage = document.getElementById('login-page');
const dashboardPage = document.getElementById('dashboard-page');
const toastEl = new bootstrap.Toast(document.getElementById('liveToast'));

loginForm.addEventListener('submit', e => {
  e.preventDefault();
  if (!loginForm.checkValidity()) {
    loginForm.classList.add('was-validated');
    return;
  }
  loginPage.classList.add('d-none');
  dashboardPage.classList.remove('d-none');
  toastEl.show();
});

// Sidebar toggle
document.getElementById('toggle-sidebar').onclick = () => {
  document.getElementById('sidebar').classList.toggle('collapsed');
};

// Logout
document.getElementById('logout-btn').onclick = () => {
  dashboardPage.classList.add('d-none');
  loginPage.classList.remove('d-none');
};

// Initialize Charts
const lineCtx = document.getElementById('lineChart').getContext('2d');
new Chart(lineCtx, {
  type: 'line',
  data: {
    labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul'],
    datasets: [{
      label: 'Sales',
      data: [12,19,3,5,2,3,9],
      borderColor: '#fcbf49',
      backgroundColor: 'rgba(252,191,73,0.2)',
      tension: 0.4
    }]
  }
});
const barCtx = document.getElementById('barChart').getContext('2d');
new Chart(barCtx, {
  type: 'bar',
  data: {
    labels: ['Product A','B','C','D','E'],
    datasets: [{
      label: 'Revenue',
      data: [65,59,80,81,56],
      backgroundColor: '#1d3557'
    }]
  }
});

// Init DataTable
$(document).ready(() => {
  $('#data-table').DataTable();
});

// Initialize particles on login page
if (document.getElementById('tsparticles-login-bg')) {
  tsParticles.load('tsparticles-login-bg', {
    particles: {
      number: { value: 50 },
      color: { value: '#fcbf49' },
      shape: { type: 'circle' },
      opacity: { value: 0.5 },
      size: { value: 3 },
      move: {
        enable: true,
        speed: 2,
        direction: 'none',
        random: false,
        straight: false,
        outModes: 'out'
      },
      links: {
        enable: true,
        distance: 150,
        color: '#fcbf49',
        opacity: 0.3,
        width: 1
      }
    },
    interactivity: {
      events: {
        onhover: { enable: true, mode: 'repulse' },
        onclick: { enable: true, mode: 'push' }
      },
      modes: {
        repulse: { distance: 100 },
        push: { quantity: 4 }
      }
    },
    retina_detect: true,
    background: {
      color: 'transparent'
    }
  });
}
</script>
</body>
</html>
